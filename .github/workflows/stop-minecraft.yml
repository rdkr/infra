name: stop-minecraft
on: [workflow_dispatch]
defaults:
  run:
    working-directory: gcp/minecraft
env:
  TF_VAR_terraform_token: ${{ secrets.terraform_token }}
  TF_VAR_cloudflare_token: ${{ secrets.cloudflare_token }}
  TF_VAR_on: false
jobs:
  terraform:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: hashicorp/setup-terraform@v1.2.1
        with:
          cli_config_credentials_token: ${{ secrets.terraform_token }}
      - run: terraform init
      - run: terraform apply -auto-approve
